<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width,initial-scale=1"><meta charset="utf-8"><link rel="stylesheet" type="text/css" href="css/normalize.css"><link rel="stylesheet" type="text/css" href="css/perfect-scrollbar.css"><link rel="stylesheet" type="text/css" href="css/highlightjs/night-owl.css"><link rel="stylesheet" type="text/css" href="index.css"><title>Order Creation | bfx-hf-strategy</title></head><body><div id="bfx-oss-docs-side-bar"><div id="bfx-oss-docs-side-bar__header"><img src="img/bfx-logo-bg-white.png" alt="Bitfinex" height="63"></div><ul><li><a href="index.html"><p>Home</p></a></li><li><a href="page_md_render_test.html"><p>Markdown Render Test</p></a></li><li><a href="/page_libraries_bitfinex_api_py_README.html"><img src="/svg/icons/python.svg"><p>bitfinex-api-py</p></a></li><li><a href="/page_libraries_bitfinex_api_go_README.html"><img src="/svg/icons/go.svg"><p>bitfinex-api-go</p></a></li><li><a href="/page_libraries_bfxfixgw_README.html"><img src="/svg/icons/go.svg"><p>bfxfixgw</p></a></li><li><a href="/page_libraries_bitfinex_api_rb_README.html"><img src="/svg/icons/ruby.svg"><p>bitfinex-api-rb</p></a></li><li><a href="/page_libraries_bitfinex_api_node_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bitfinex-api-node</p></a></li><li><a href="/page_libraries_bfx_api_mock_srv_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-api-mock-srv</p></a></li><li><a href="/page_libraries_bfx_api_node_core_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-api-node-core</p></a></li><li><a href="/page_libraries_bfx_api_node_models_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-api-node-models</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_example_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-example</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_managed_candles_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-managed-candles</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_managed_ob_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-managed-ob</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_ob_checksum_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-ob-checksum</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_seq_audit_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-seq-audit</p></a></li><li><a href="/page_libraries_bfx_api_node_plugin_wd_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-api-node-plugin-wd</p></a></li><li><a href="/page_libraries_bfx_api_node_rest_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-api-node-rest</p></a></li><li><a href="/page_libraries_bfx_api_node_util_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-api-node-util</p></a></li><li><a href="/page_libraries_bfx_api_node_ws1_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-api-node-ws1</p></a></li><li><a href="/page_libraries_bfx_hf_backtest_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-hf-backtest</p></a></li><li><a href="/page_libraries_bfx_hf_chart_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-hf-chart</p></a></li><li><a href="/page_libraries_bfx_hf_data_server_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-hf-data-server</p></a></li><li><a href="/page_libraries_bfx_hf_ext_plugin_bitfinex_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-hf-ext-plugin-bitfinex</p></a></li><li><a href="/page_libraries_bfx_hf_ext_plugin_dummy_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-hf-ext-plugin-dummy</p></a></li><li><a href="/page_libraries_bfx_hf_indicators_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-hf-indicators</p></a></li><li><a href="/page_libraries_bfx_hf_models_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-hf-models</p></a></li><li><a href="/page_libraries_bfx_hf_models_adapter_lowdb_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-lowdb</p></a></li><li><a href="/page_libraries_bfx_hf_models_adapter_sql_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-sql</p></a></li><li><a href="/page_libraries_bfx_hf_models_adapter_template_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-hf-models-adapter-template</p></a></li><li><a href="/page_libraries_bfx_hf_algo_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-hf-algo</p></a></li><li><a href="/page_libraries_bfx_hf_server_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-hf-server</p></a></li><li class="active"><a href="/page_libraries_bfx_hf_strategy_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-hf-strategy</p></a><ul><li><a href="page_libraries_bfx_hf_strategy_README.html"><p>- README</p></a></li><li><a href="page_libraries_bfx_hf_strategy_reference.html"><p>- API Reference</p></a></li><li><a href="page_libraries_bfx_hf_strategy_tutorial_architectural overview.html"><p>- Architectural Overview</p></a></li><li><a href="page_libraries_bfx_hf_strategy_tutorial_backtesting offline.html"><p>- Backtesting Offline</p></a></li><li><a href="page_libraries_bfx_hf_strategy_tutorial_backtesting online.html"><p>- Backtesting Online</p></a></li><li class="active"><a href="page_libraries_bfx_hf_strategy_tutorial_order creation.html"><p>- Order Creation</p></a></li><li><a href="page_libraries_bfx_hf_strategy_tutorial_plugin system.html"><p>- Plugin System</p></a></li><li><a href="page_libraries_bfx_hf_strategy_tutorial_strategy design.html"><p>- Strategy Design</p></a></li><li><a href="page_libraries_bfx_hf_strategy_tutorial_using indicators.html"><p>- Using Indicators</p></a></li></ul></li><li><a href="/page_libraries_bfx_hf_strategy_exec_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-hf-strategy-exec</p></a></li><li><a href="/page_libraries_bfx_hf_ui_config_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-hf-ui-config</p></a></li><li><a href="/page_libraries_bfx_hf_util_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-hf-util</p></a></li><li><a href="/page_libraries_bfx_ws2_api_audit_README.html"><img src="/svg/icons/nodejs_small.svg"><p>bfx-ws2-api-audit</p></a></li><li><a href="/page_libraries_cbq_js_README.html"><img src="/svg/icons/nodejs_small.svg"><p>cbq-js</p></a></li><li><a href="/page_libraries_caron_README.html"><img src="/svg/icons/nodejs_small.svg"><p>caron</p></a></li><li><a href="/page_libraries_eos_name_verify_README.html"><img src="/svg/icons/nodejs_small.svg"><p>eos-name-verify</p></a></li><li><a href="/page_libraries_grenache_browser_http_README.html"><img src="/svg/icons/nodejs_small.svg"><p>grenache-browser-http</p></a></li><li><a href="/page_libraries_grenache_grape_README.html"><img src="/svg/icons/nodejs_small.svg"><p>grenache-grape</p></a></li><li><a href="/page_libraries_grenache_nodejs_base_README.html"><img src="/svg/icons/nodejs_small.svg"><p>grenache-nodejs-base</p></a></li><li><a href="/page_libraries_grenache_nodejs_http_README.html"><img src="/svg/icons/nodejs_small.svg"><p>grenache-nodejs-http</p></a></li><li><a href="/page_libraries_grenache_nodejs_link_README.html"><img src="/svg/icons/nodejs_small.svg"><p>grenache-nodejs-link</p></a></li><li><a href="/page_libraries_grenache_nodejs_utp_README.html"><img src="/svg/icons/nodejs_small.svg"><p>grenache-nodejs-utp</p></a></li><li><a href="/page_libraries_grenache_nodejs_ws_README.html"><img src="/svg/icons/nodejs_small.svg"><p>grenache-nodejs-ws</p></a></li><li><a href="/page_libraries_grenache_nodejs_ws_tls_README.html"><img src="/svg/icons/nodejs_small.svg"><p>grenache-nodejs-ws-tls</p></a></li><li><a href="/page_libraries_lib_js_util_currencies_README.html"><img src="/svg/icons/nodejs_small.svg"><p>lib-js-util-currencies</p></a></li><li><a href="/page_libraries_lib_js_util_math_README.html"><img src="/svg/icons/nodejs_small.svg"><p>lib-js-util-math</p></a></li><li><a href="/page_libraries_lib_js_util_number_README.html"><img src="/svg/icons/nodejs_small.svg"><p>lib-js-util-number</p></a></li><li><a href="/page_libraries_lib_js_util_symbol_README.html"><img src="/svg/icons/nodejs_small.svg"><p>lib-js-util-symbol</p></a></li><li><a href="/page_libraries_smidgen_README.html"><img src="/svg/icons/nodejs_small.svg"><p>smidgen</p></a></li><li><a href="/page_libraries_sunbeam_README.html"><img src="/svg/icons/nodejs_small.svg"><p>sunbeam</p></a></li><li><a href="/page_libraries_wasteland_README.html"><img src="/svg/icons/nodejs_small.svg"><p>wasteland</p></a></li></ul></div><div id="bfx-oss-docs-content"><div id="bfx-oss-docs-header-bar"><h2>Order Creation</h2><h2>bfx-hf-strategy</h2></div><div id="bfx-oss-docs-content-wrapper" class="bfx-oss-docs-content-type-api-docs"><div class="bfx-oss-docs-md-content bfx-oss-docs-code-wrapper"><div id="bfx-oss-docs-api-docs-index"><div id="bfx-oss-docs-api-docs-index__inner"><nav class="bfx-oss-docs-md-toc"><ol><li><a href="#overview">Overview</a><ol><li><a href="#symbols">Symbols</a></li><li><a href="#creating-an-order">Creating an Order</a></li><li><a href="#submitting-an-order">Submitting an Order</a></li><li><a href="#alternative-parameter-formats">Alternative Parameter Formats</a></li></ol></li></ol></nav></div></div><h3 id="overview"><a class="header-anchor" href="#overview">§</a> Overview</h3><p>Orders are submitted through the official <a href="https://github.com/bitfinexcom/bitfinex-api-node">bitfinex-api-node</a> Bitfinex Node.JS library, and as such can be defined using the <code>Order</code> model included with <a href="https://github.com/bitfinexcom/bfx-api-node-models">bfx-api-node-mode </a>. This removes the need to construct a new order packet for the WSv2 API, and validates parameters automatically.</p><p>Order types are available on the <code>Order.type</code> map:</p><ul><li><code>Order.type.LIMIT</code></li><li><code>Order.type.MARKET</code></li><li><code>Order.type.STOP</code></li><li><code>Order.type.STOP_LIMIT</code></li><li><code>Order.type.TRAILING_STOP</code></li><li><code>Order.type.FOK</code> - fill or kill</li><li><code>Order.type.IOC</code> - immediate or cancel</li></ul><p>The types above all trade on margin; for their exchange counterparts prefix the type with <code>EXCHANGE_</code>, as in <code>Order.type.EXCHANGE_LIMIT</code>.</p><h4 id="symbols"><a class="header-anchor" href="#symbols">§</a> Symbols</h4><p>Symbols must be prefixed with <code>t</code> (i.e. <code>'tLEOUSD'</code>) for standard markets and <code>f</code> (i.e. <code>'fUSD'</code>) for funding markets. To help prevent errors, all symbols are available on the <a href="https://github.com/bitfinexcom/bfx-hf-util">bfx-hf-util</a> utility library under the <code>SYMBOLS</code> export, with base and quote currencies seperated by an underscore. For example, <code>'tLEUSD'</code> becomes <code>SYMBOLS.LEO_USD</code>.</p><h4 id="creating-an-order"><a class="header-anchor" href="#creating-an-order">§</a> Creating an Order</h4><p>To create a new order, use the <code>Order</code> constructor and pass the required parameters:</p><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> { Order } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'bfx-ap-node-models'</span>)
<span class="hljs-keyword">const</span> { SYMBOLS } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'bfx-hf-util'</span>)

<span class="hljs-keyword">const</span> o = <span class="hljs-keyword">new</span> Order({
  <span class="hljs-attr">type</span>: Order.type.STOP_LIMIT, <span class="hljs-comment">// margin order</span>
  <span class="hljs-attr">symbol</span>: SYMBOLS.LEO_USD,
  <span class="hljs-attr">price</span>: <span class="hljs-number">0.75</span>, <span class="hljs-comment">// price is converted to a decimal string automatically</span>
  <span class="hljs-attr">priceAuxLimit</span>: <span class="hljs-number">0.82</span>, <span class="hljs-comment">// stop price</span>
  <span class="hljs-attr">amount</span>: <span class="hljs-number">6</span>,
  <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span>,   <span class="hljs-comment">// makes the order invisible to other users</span>
  <span class="hljs-attr">postonly</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// ensure the order is inserted into the book</span>
})
</code></pre><h4 id="submitting-an-order"><a class="header-anchor" href="#submitting-an-order">§</a> Submitting an Order</h4><p>The order created above can be passed to any one of the position manipulation helper methods, listed below:</p><ul><li>[openLongPositionMarket(params = {})]{@link module:Helpers.h.openLongPositionMarket}</li><li>[openLongPositionLimit(params = {})]{@link module:Helpers.h.openLongPositionLimit}</li><li>[openLongPosition(params = {})]{@link module:Helpers.h.openLongPosition}</li><li>[openShortPositionMarket(params = {})]{@link module:Helpers.h.openShortPositionMarket}</li><li>[openShortPositionLimit(params = {})]{@link module:Helpers.h.openShortPositionLimit}</li><li>[openShortPosition(params = {})]{@link module:Helpers.h.openShortPosition}</li><li>[openPosition(params = {})]{@link module:Helpers.h.openPosition}</li><li>[updateLongPositionMarket(params = {})]{@link module:Helpers.h.updateLongPositionMarket}</li><li>[updateLongPositionLimit(params = {})]{@link module:Helpers.h.updateLongPositionLimit}</li><li>[updateLongPosition(params = {})]{@link module:Helpers.h.updateLongPosition}</li><li>[updateShortPositionMarket(params = {})]{@link module:Helpers.h.updateShortPositionMarket}</li><li>[updateShortPositionLimit(params = {})]{@link module:Helpers.h.updateShortPositionLimit}</li><li>[updateShortPosition(params = {})]{@link module:Helpers.h.updateShortPosition}</li><li>[updatePosition(params = {})]{@link module:Helpers.h.updatePosition}</li><li>[closePositionMarket(params = {})]{@link module:Helpers.h.closePositionMarket}</li><li>[closePositionLimit(params = {})]{@link module:Helpers.h.closePositionLimit}</li><li>[closePosition(params = {})]{@link module:Helpers.h.closePosition}</li></ul><p>All of the methods listed above return promises, which resolve on order confirmation. Taken together, within a strategy this might look like:</p><pre><code class="hljs language-js"><span class="hljs-keyword">const</span> HFS = <span class="hljs-built_in">require</span>(<span class="hljs-string">'bfx-hf-strategy'</span>)
<span class="hljs-keyword">const</span> { SYMBOLS } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'bfx-hf-util'</span>)

<span class="hljs-keyword">const</span> strategy = HFS.define({
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">exec</span>: <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// strategy logic...</span>

    <span class="hljs-comment">// Submit an order via a position method. Making this call twice in a row</span>
    <span class="hljs-comment">// will result in an error, as the openPosition() helper fails if a position</span>
    <span class="hljs-comment">// is already open.</span>
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.openPosition(<span class="hljs-keyword">new</span> Order({
      <span class="hljs-attr">type</span>: Order.type.STOP_LIMIT, <span class="hljs-comment">// margin order</span>
      <span class="hljs-attr">symbol</span>: SYMBOLS.LEO_USD,
      <span class="hljs-attr">price</span>: <span class="hljs-number">0.75</span>, <span class="hljs-comment">// price is converted to a decimal string automatically</span>
      <span class="hljs-attr">priceAuxLimit</span>: <span class="hljs-number">0.82</span>, <span class="hljs-comment">// stop price</span>
      <span class="hljs-attr">amount</span>: <span class="hljs-number">6</span>,
      <span class="hljs-attr">hidden</span>: <span class="hljs-literal">true</span>,   <span class="hljs-comment">// makes the order invisible to other users</span>
      <span class="hljs-attr">postonly</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// ensure the order is inserted into the book</span>
    }))

    <span class="hljs-comment">// At this point the order has been confirmed. One may save the returned</span>
    <span class="hljs-comment">// promise and continue execution immediately to prevent delays in logic</span>
    <span class="hljs-comment">// processing, but it is recommended to listen for a resolve/reject in order</span>
    <span class="hljs-comment">// to handle rejected Orders.</span>
  }
})
</code></pre><h4 id="alternative-parameter-formats"><a class="header-anchor" href="#alternative-parameter-formats">§</a> Alternative Parameter Formats</h4><p>The methods listed above all take either an <code>Order</code> model instance, a Bitfinex WSv2 array-format order, or a plain JS object holding parameters which are then passed to a new <code>Order</code> instance internally.</p></div></div><!--
      <div id="bfx-oss-docs-footer-bar">
        <div id="bfx-oss-docs-footer-bar__container">
          <p>Copyright © 2013-2020 iFinex Inc. All rights reserved.</p>
        </div>
      </div>
      --></div><script type="text/javascript" src="js/vendor/debug.min.js"></script><script type="text/javascript" src="js/vendor/lodash.min.js"></script><script type="text/javascript" src="js/vendor/zepto.min.js"></script><script type="text/javascript" src="js/vendor/perfect-scrollbar.min.js"></script><script type="text/javascript" src="js/main.js"></script></body></html>